<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Approximately re-tally Census data under new block boundaries — pl_retally • PL94171</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Approximately re-tally Census data under new block boundaries — pl_retally" />
<meta property="og:description" content="Applies a block crosswalk to a table of block data using areal interpolation.
That is, the fraction of land area in the overlapping region between old and
new blocks is used to divide the population of the old blocks into the new." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PL94171</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/CoryMcCartan/PL94171/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Approximately re-tally Census data under new block boundaries</h1>
    <small class="dont-index">Source: <a href='https://github.com/CoryMcCartan/PL94171/blob/master/R/pl_crosswalk.R'><code>R/pl_crosswalk.R</code></a></small>
    <div class="hidden name"><code>pl_retally.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Applies a block crosswalk to a table of block data using areal interpolation.
That is, the fraction of land area in the overlapping region between old and
new blocks is used to divide the population of the old blocks into the new.</p>
    </div>

    <pre class="usage"><span class='fu'>pl_retally</span><span class='op'>(</span><span class='va'>d_from</span>, <span class='va'>crosswalk</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>d_from</th>
      <td><p>The data frame to process. All numeric columns will be re-tallied.
Integer columns will be re-tallied with rounding.
Character columns will be preserved if constant across new block geometries.</p></td>
    </tr>
    <tr>
      <th>crosswalk</th>
      <td><p>The crosswalk data frame, from <code><a href='pl_crosswalk.html'>pl_crosswalk()</a></code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A new data frame, like <code>d_from</code>, except with the geometry column
dropped, if one exists. New geometry should be loaded, perhaps with
<code><a href='https://rdrr.io/pkg/tigris/man/blocks.html'>tigris::blocks()</a></code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All numeric columns will be re-tallied. Integer columns will be re-tallied
with rounding. Character columns will be preserved if constant across new
block geometries.</p>
<p>Blocks from other states will be ignored.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='va'>crosswalk</span> <span class='op'>=</span> <span class='fu'><a href='pl_crosswalk.html'>pl_crosswalk</a></span><span class='op'>(</span><span class='st'>"RI"</span>, <span class='fl'>2010</span>, <span class='fl'>2020</span><span class='op'>)</span>
<span class='va'>RI_2010</span> <span class='op'>=</span> <span class='fu'><a href='pl_tidy_shp.html'>pl_tidy_shp</a></span><span class='op'>(</span><span class='st'>"RI"</span>, <span class='fu'><a href='pl_url.html'>pl_url</a></span><span class='op'>(</span><span class='st'>"RI"</span>, <span class='fl'>2010</span><span class='op'>)</span>, <span class='fl'>2010</span><span class='op'>)</span>
<span class='fu'>pl_retally</span><span class='op'>(</span><span class='va'>RI_2010</span>, <span class='va'>crosswalk</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 25,649 x 24</span>
#&gt;    GEOID     state county    vtd   area_land area_water   pop pop_hisp pop_white
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>
#&gt; <span style='color: #BCBCBC;'> 1</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>         <span style='text-decoration: underline;'>5</span>329          0    15        3        13
#&gt; <span style='color: #BCBCBC;'> 2</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>         <span style='text-decoration: underline;'>6</span>001          0     8        0         6
#&gt; <span style='color: #BCBCBC;'> 3</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>        <span style='text-decoration: underline;'>11</span>821          0    17        0        17
#&gt; <span style='color: #BCBCBC;'> 4</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>        <span style='text-decoration: underline;'>16</span>049          0    28        0        28
#&gt; <span style='color: #BCBCBC;'> 5</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>         <span style='text-decoration: underline;'>5</span>398          0    12        0         9
#&gt; <span style='color: #BCBCBC;'> 6</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>       <span style='text-decoration: underline;'>181</span>092          0    93        1        84
#&gt; <span style='color: #BCBCBC;'> 7</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>        <span style='text-decoration: underline;'>17</span>056          0    23        0        23
#&gt; <span style='color: #BCBCBC;'> 8</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>        <span style='text-decoration: underline;'>16</span>672          0    28        0        28
#&gt; <span style='color: #BCBCBC;'> 9</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>         <span style='text-decoration: underline;'>7</span>291          0     9        0         9
#&gt; <span style='color: #BCBCBC;'>10</span> 44001030… RI    Bristol … <span style='color: #BB0000;'>NA</span>       <span style='text-decoration: underline;'>164</span>924          0    70        1        64
#&gt; <span style='color: #949494;'># … with 25,639 more rows, and 15 more variables: pop_black &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   pop_aian &lt;int&gt;, pop_asian &lt;int&gt;, pop_nhpi &lt;int&gt;, pop_other &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   pop_two &lt;int&gt;, vap &lt;int&gt;, vap_hisp &lt;int&gt;, vap_white &lt;int&gt;, vap_black &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   vap_aian &lt;int&gt;, vap_asian &lt;int&gt;, vap_nhpi &lt;int&gt;, vap_other &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   vap_two &lt;int&gt;</span></div><div class='input'><span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Cory McCartan, Christopher T. Kenny.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


